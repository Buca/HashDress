var $jc=$jc||{};$jc.scope={};$jc.arrayIteratorImpl=function(e){var f=0;return function(){return f<e.length?{done:!1,value:e[f++]}:{done:!0}}};$jc.arrayIterator=function(e){return{next:$jc.arrayIteratorImpl(e)}};$jc.makeIterator=function(e){var f="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return f?f.call(e):$jc.arrayIterator(e)};$jc.arrayFromIterator=function(e){for(var f,g=[];!(f=e.next()).done;)g.push(f.value);return g};
$jc.arrayFromIterable=function(e){return e instanceof Array?e:$jc.arrayFromIterator($jc.makeIterator(e))};
var HashDress=function(){function Path(a,c,b){this.context=b=void 0===b?HashDress:b;this.context.paths.add(this);this.path=this.context.fixPath(a);this.wild=!1;"*"===this.path[this.path.length-1]&&(this.path=this.path.substring(0,this.path.length-1),this.wild=!0);this.callback=c.bind(this);a=this.context.parsePath(this.path);this.list=a.list;this.parameters=a.parameters}function Query(a,c,b,d){this.context=b=void 0===b?HashDress:b;this.context.queries.set(a,this);this.name=a;this.method=c.bind(this);this.value=
void 0;this.enabled=!0}function Router(a){a=void 0===a?{}:a;this.autoInit=void 0!==a.autoInit?a.autoInit:!1;this.routerEnabled=a.routerEnabled||!0;this.currentHash=void 0;this.pathsEnabled=!0;this.paths=new Set;this.deltaTriggerPath=!0;this.currentPath={path:void 0,list:[],parameters:{}};this.queriesEnabled=!0;this.queries=new Map;this.deltaTriggerQueries=!0;this.currentQueries={queries:void 0,list:new Map};this.fragmentEnabled=!0;this.currentFragment=void 0;this.Path=Path;this.Query=Query;this.Router=Router;this.autoInit&&
this.init()}Path.prototype={dispose:function(){this.context.paths["delete"](this);this.context=this.path=this.callback=this.parameters=this.list=void 0},trigger:function(a){this.callback(void 0,a)},changePath:function(a){this.path=this.context.fixPath(a)}};Query.prototype={enable:function(){this.enabled=!0;return this},disable:function(){this.enabled=!1;return this},trigger:function(a){this.method(a);return this},dispose:function(){this.context.query["delete"](this.name);this.context=this.enabled=this.value=
this.method=this.name=void 0}};Router.prototype={_hashChange:function(a,c){if(this.currentHash!==a&&this.routerEnabled){var b=a.split("?");if(1<b.length){b.push.apply(b,$jc.arrayFromIterable(b.pop().split("#")));var d=b[0];var e=b[1];b=2<b.length?b[2]:void 0}else b=b[0].substring(1).split("#"),d="#"+b[0],e=void 0,b=1<b.length?b[1]:void 0;d=this._pathChange(d);e=this._queryChange(e);b=this._fragmentChange(b);this.currentHash=d+e+b;"replace"===c?history.replaceState(null,null,this.currentHash):"push"===
c&&history.pushState(null,null,this.currentHash)}},_pathChange:function(a){a=this.fixPath(a);this.currentPath.path===a&&this.deltaTriggerPath||!this.pathsEnabled||(this.triggerPath(a),this.currentPath.path=a);return a},_queryChange:function(a){a=void 0!==a?this.fixQueries(a):"";this.deltaTriggerQueries&&this.currentQueries===a||!this.queriesEnabled||(this.triggerQueries(a),this.currentQueries.queries=a);return a},_fragmentChange:function(a){this.fragmentEnabled&&void 0!==a&&(this.triggerFragment(a),
this.currentFragment=a);return void 0!==a?"#"+a:""},setHash:function(){},setPath:function(){},setQuery:function(){},fixPath:function(a){1<a.length?(a="/"!==a[1]?"#/"+a.substring(1):"#/"+a.substring(2),2<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1))):a="#/";return a},parsePath:function(a){for(var c=a.split("/"),b={},d=1;d<c.length;d++)-1!==c[d].indexOf(":")?b[c[d].substring(1)]={index:d}:""===c[d]&&c.splice(d,1);return{path:a,list:c,parameters:b}},triggerPath:function(a){var c=a.split("/");
this.paths.forEach(function(b){if(c.length===b.list.length||b.wild&&b.list.length<=c.length){for(var d=0;d<b.list.length&&(":"===b.list[d][0]||c[d]===b.list[d]||d===b.list.length-1&&b.wild&&b.list[d]===c[d].substring(0,b.list));d++);if(d===b.list.length){d={};for(var e in b.parameters)d[e]=c[b.parameters[e].index];b.callback(a,d)}}})},fixQueries:function(a){"?"!==a[0]&&(a="?"+a);return a},parseQueries:function(a){a=a.split("&");a[0]=a[0].substring(1);for(var c=0;c<a.length;c++)a[c]=a[c].split("=");
return a},triggerQueries:function(a){a=this.parseQueries(a);for(var c,b=0;b<a.length;b++)c=this.queries.get(a[b][0]),void 0===c||!c.enabled||this.deltaTriggerQueries&&c.value===a[b][1]&&this.currentQueries.list.has(c.name)||(this.currentQueries.list.set(c.name,c),c.value=a[b][1],c.method(c.value))},triggerFragment:function(a){if("complete"===document.readyState||"interactive"===document.readyState){var c=document.getElementById(a);null!==c&&c.scrollIntoView()}else window.addEventListener("DOMContentLoaded",
function(){var b=document.getElementById(a);null!==b&&b.scrollIntoView()})},init:function(){this._hashChange(window.location.hash,"replace");var a=function(){this._hashChange(window.location.hash,"replace")}.bind(this);window.addEventListener("hashchange",a)}};return new Router}();
